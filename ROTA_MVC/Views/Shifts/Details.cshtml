@model ROTA_MVC.Models.ShiftDto 

@{
    ViewData["Title"] = "Shift Details";
    bool isAdmin = User.IsInRole("Admin");
}

@* --- Page Header --- *@
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">@ViewData["Title"]</h1>
    <div> @* Action Buttons Area *@
         <a asp-action="Index" class="btn btn-sm btn-outline-secondary">
             <i class="bi bi-arrow-left me-1"></i> Back to Shift List
         </a>
         <a asp-action="Calendar" class="btn btn-sm btn-outline-secondary ms-1"> @* Link back to calendar *@
             <i class="bi bi-calendar-week me-1"></i> Calendar View
         </a>
         @if (isAdmin)
         {
             <a asp-action="Edit" asp-route-id="@Model?.ShiftId" class="btn btn-sm btn-warning ms-2">
                 <i class="bi bi-pencil-fill me-1"></i>Edit Shift
             </a>
             <a asp-action="Delete" asp-route-id="@Model?.ShiftId" class="btn btn-sm btn-outline-danger ms-1">
                <i class="bi bi-trash3 me-1"></i>Delete...
             </a>
         }
    </div>
</div>

<div class="row justify-content-center">
    <div class="col-lg-10 col-xl-8">
        <div class="card shadow-sm mb-4">
            <div class="card-header d-flex justify-content-between align-items-center flex-wrap">
                 <div>
                    <h4 class="mb-0 me-3">
                        <i class="bi @(Model.IsOnCall ? "bi-telephone-fill text-danger" : "bi-building text-primary") me-2"></i> @* Icon based on type *@
                        Shift for @Model.EmployeeFullName
                    </h4>
                 </div>
                  <div class="mt-1 mt-md-0"> @* Ensure badge doesn't wrap badly *@
                     <span class="badge bg-primary-subtle text-primary-emphasis rounded-pill fs-6 px-3 py-1">@Model.ShiftTypeName</span>
                      @if(Model.IsOnCall) { <span class="badge bg-danger-subtle text-danger-emphasis rounded-pill fs-6 px-3 py-1">On Call</span> }
                 </div>
            </div>
            <div class="card-body p-4">

                @* Section 1: Assignment Details *@
                 <div class="mb-4 pb-3 border-bottom">
                     <h5 class="text-primary-emphasis mb-3 small text-uppercase fw-semibold">Assignment Details</h5>
                    <dl class="row mb-0">
                        <dt class="col-sm-4 col-md-3">Employee</dt>
                        <dd class="col-sm-8 col-md-9">@Model.EmployeeFullName</dd>

                        <dt class="col-sm-4 col-md-3">Team</dt>
                        <dd class="col-sm-8 col-md-9">@(string.IsNullOrWhiteSpace(Model.TeamName) ? Html.Raw("<span class='text-muted'>N/A</span>") : Model.TeamName)</dd>

                        <dt class="col-sm-4 col-md-3">Shift Type</dt>
                        <dd class="col-sm-8 col-md-9">@Model.ShiftTypeName @(Model.IsOnCall ? "(On Call)" : "")</dd>
                    </dl>
                 </div>

                 @* Section 2: Timing & Notes *@
                 <div class="mb-3">
                     <h5 class="text-primary-emphasis mb-3 small text-uppercase fw-semibold">Timing & Notes</h5>
                     <dl class="row mb-0">
                         <dt class="col-sm-4 col-md-3">Start Time</dt>
                         <dd class="col-sm-8 col-md-9">@Model.ShiftStartDateTime.ToLocalTime().ToString("F")</dd> @* Full Date & Time *@

                        <dt class="col-sm-4 col-md-3">End Time</dt>
                        <dd class="col-sm-8 col-md-9">@Model.ShiftEndDateTime.ToLocalTime().ToString("F")</dd>

                        <dt class="col-sm-4 col-md-3">Notes</dt>
                        <dd class="col-sm-8 col-md-9">@(string.IsNullOrWhiteSpace(Model.Notes) ? Html.Raw("<span class='text-muted fst-italic'>None</span>") : Model.Notes)</dd>
                    </dl>
                 </div>

                  @* Optional: Audit Info Section *@
                  @* <hr class="my-4">
                  <h5 class="text-primary-emphasis mb-3 small text-uppercase fw-semibold">Audit Information</h5>
                   <dl class="row mb-0 small text-muted">
                       <dt class="col-sm-4 col-md-3">Shift ID</dt>
                       <dd class="col-sm-8 col-md-9">@Model.ShiftId</dd>
                       <dt class="col-sm-4 col-md-3">Created At</dt>
                       <dd class="col-sm-8 col-md-9">@Model.CreatedAt.ToLocalTime().ToString("g")</dd>
                       <dt class="col-sm-4 col-md-3">Last Updated At</dt>
                       <dd class="col-sm-8 col-md-9">@Model.UpdatedAt.ToLocalTime().ToString("g")</dd>
                   </dl> *@

            </div> @* End Card Body *@
        </div> @* End Card *@
    </div> @* End Col *@
</div> @* End Row *@